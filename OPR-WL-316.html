<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>서부내륙고속도로 통합운영단말</title>
  <link rel="stylesheet" href="css/common.css">
  <link rel="stylesheet" type="text/css" href="https://cdn.rawgit.com/ax5ui/ax5ui-grid/master/dist/ax5grid.css">
  <script src="js/jquery.min.js"></script>
  <script src="js/tui-time-picker.js"></script>
  <script src="js/tui-date-picker.js"></script>
  <script src="js/jquery-ui.min.js"></script>
  <script src="js/jquery.magnific-popup.min.js"></script>
  <script src="js/swiper-bundle.min.js"></script>
  <script src="js/aos.js"></script>
  <script type="text/javascript" src="https://cdn.rawgit.com/ax5ui/ax5core/master/dist/ax5core.min.js"></script>
  <script type="text/javascript" src="https://cdn.rawgit.com/ax5ui/ax5ui-grid/master/dist/ax5grid.min.js"></script>
  <script src="js/ui.js"></script>
</head>
<body>
  <div id="wrap" class="c-scrollbar">
    <div id="header">
      <h1><a href="#"><img src="img/wih-logo-io.png" alt=""></a></h1>
      <div class="item-area">
        <ul id="gnb" data-active="9">
          <li><a href="#">시스템관리</a></li>
          <li><a href="#">기초정보관리</a></li>
          <li><a href="#">FTMS 제어</a></li>
          <li><a href="#">운영관리</a></li>
          <li><a href="#">상황관리</a></li>
          <li><a href="#">모니터링</a></li>
          <li><a href="#">이력조회</a></li>
          <li><a href="#">통계조회</a></li>
          <li><a href="#">현장장비 점검관리</a></li>
          <li><a href="#">안전관리</a></li>
          <li><a href="#">작업 및 유지보수 이력 관리</a></li>
        </ul>
        <ul id="utilmenu">
          <li><a href="#" class="s-ico notify w-label new"><span>고윤정님</span></a></li>
          <li><a href="#" class="s-ico bookmark"></a></li>
          <li><a href="#" class="s-ico logout"></a></li>
        </ul>
        <div class="bookmark-area">
          <ul>
            <li>
              <a href="#">
                <span class="s-ico star on"></span>
                <span class="label">즐겨찾기</span>
              </a>
            </li>
            <li>
              <a href="#">
                <span class="s-ico star on"></span>
                <span class="label">즐겨찾기</span>
              </a>
            </li>
            <li>
              <a href="#">
                <span class="s-ico star on"></span>
                <span class="label">즐겨찾기</span>
              </a>
            </li>
            <li>
              <a href="#">
                <span class="s-ico star on"></span>
                <span class="label">즐겨찾기</span>
              </a>
            </li>
            <li>
              <a href="#">
                <span class="s-ico star on"></span>
                <span class="label">즐겨찾기</span>
              </a>
            </li>
            <li>
              <a href="#">
                <span class="s-ico star on"></span>
                <span class="label">즐겨찾기</span>
              </a>
            </li>
            <li>
              <a href="#">
                <span class="s-ico star on"></span>
                <span class="label">즐겨찾기</span>
              </a>
            </li>
            <li>
              <a href="#">
                <span class="s-ico star on"></span>
                <span class="label">즐겨찾기</span>
              </a>
            </li>
            <li>
              <a href="#">
                <span class="s-ico star on"></span>
                <span class="label">RWIS 제어기 기초정보관리</span>
              </a>
            </li>
            <li>
              <a href="#">
                <span class="s-ico star on"></span>
                <span class="label">즐겨찾기 최대 10개</span>
              </a>
            </li>
          </ul>
          <div class="bookmark-item">
            <a href="#" class="btn-text">즐겨찾기 관리 <span class="s-ico arrow"></span></a>
            <a href="#" class="s-ico close gray"></a>
          </div>
        </div><!-- .bookmark-area -->
      </div>
    </div><!--#header -->
    <div id="container" class="ver-lnb">
      <div class="left-wrap">
        <h3 class="tit">현장장비 점검관리</h3>
        <ul class="lnb-list">
          <li class="on">
            <a href="#" class="menu toggle">FTMS 점검계획</a>
            <ul>
              <li class="on">
                <a href="#" class="menu">점검 계획</a>
                <a href="#" class="s-ico star"></a>
              </li>
              <li>
                <a href="#" class="menu">FTMS 점검 체크리스트 관리</a>
                <a href="#" class="s-ico star"></a>
              </li>
            </ul>
          </li>
          <li>
            <a href="#" class="menu toggle">FTMS 점검 일지 관리</a>
            <ul>
              <li>
                <a href="#" class="menu">FTMS 점검 일지 관리</a>
                <a href="#" class="s-ico star"></a>
              </li>
            </ul>
          </li>
          <li>
            <a href="#" class="menu toggle">고장 및 수리 관리</a>
            <ul>
              <li>
                <a href="#" class="menu">서브 메뉴</a>
                <a href="#" class="s-ico star"></a>
              </li>
            </ul>
          </li>
          <li>
            <a href="#" class="menu">점검 항목 관리</a>
            <a href="#" class="s-ico star"></a>
          </li>
          <li>
            <a href="#" class="menu toggle">보고서</a>
            <ul>
              <li>
                <a href="#" class="menu">서브 메뉴</a>
                <a href="#" class="s-ico star"></a>
              </li>
            </ul>
          </li>
          <li>
            <a href="#" class="menu toggle">센터설비 점검 체크리스트</a>
            <ul>
              <li>
                <a href="#" class="menu">서브 메뉴</a>
                <a href="#" class="s-ico star"></a>
              </li>
            </ul>
          </li>
        </ul>
      </div><!-- .left-wrap -->
      <div class="content-wrap">
        <div class="content-top">
          <div class="menu-area">
            <a href="#" class="s-ico home"></a>
            <div class="menu-swiper swiper-container">
              <div class="swiper-wrapper">
                <div class="swiper-slide on">
                  <a href="#" class="label">FTMS 점검 일지 관리</a>
                  <a href="#" class="s-ico close"></a>
                </div>
              </div>
            </div>
          </div>
          <div class="navi-area">
            <a href="" class="s-ico arrow-l"></a>
            <a href="" class="s-ico arrow-r"></a>
          </div>
        </div><!-- .content-top -->
        <div class="content-area">
          <div class="content-inner">
            <div class="search-area">
              <ul class="tab-btn">
                <li class="on"><a href="#">현장설비</a></li>
                <li><a href="#">센터설비</a></li>
              </ul>
              <div class="btns-wrap">
                <span class="btn-base btn-ico"><a href="#"><em><span class="s-ico plan"></span>계획출력</em></a></span>
                <span class="btn-base btn-ico"><a href="#"><em><span class="s-ico color"></span>색상범례</em></a></span>
              </div>
            </div><!-- .search-area -->
            <div class="content-frame c-scrollbar">
              <div class="calendar-item">
                <ul class="tab-btn">
                  <li class="on"><a href="#">월간</a></li>
                  <li><a href="#">주간</a></li>
                </ul>
              </div>
              <div id="calendar" class="monthGrid"></div>
            </div><!-- .content-frame -->
          </div><!-- .content-inner -->
        </div><!-- .content-area -->
      </div><!-- .content-wrap -->
    </div><!-- #container -->

    <div class="calendar-tooltip">
      <ul>
        <li><a href="#">스케줄 상세보기</a></li>
        <li><a href="#">스케줄 수정</a></li>
        <li><a href="#">스케줄 삭제</a></li>
      </ul>
    </div>
  </div><!-- #wrap -->
  
  <script src="js/fullCalendar.js"></script>
  <script src="js/calendarData.js"></script>
  <script>
    // 달력 DOCS(EVENT) - https://fullcalendar.io/docs/event-object
    var _showTip = false;
    var _timerTip = null;
    var fullCalendar = null;

    var drawTotalUI = function(){
      $('.fc-daygrid-day-bottom .total-num').remove(); // 이전, 다음달 클릭 시 초기화
      if (!$('#calendar.fc').hasClass('timeGrid')) {
        $('#calendar.fc .fc-daygrid-day').each(function () {
          $(this).find('.fc-daygrid-day-number').text($(this).find('.fc-daygrid-day-number').text().split('일')[0]);          
        });
      } else {
        $('#calendar.fc .fc-view-harness').css('height', $('#calendar.fc .fc-daygrid-body').outerHeight());
      }
    }

    document.addEventListener('DOMContentLoaded', function() {
      var calendarEl = document.getElementById('calendar');

      fullCalendar = new FullCalendar.Calendar(calendarEl, {
        headerToolbar: {
          left: null,
          center: 'prev title next',
          right: null,
        },
        initialDate: '2024-07-01',
        locale: 'ko',
        editable: true, // Drag 이벤트 비활성화
        dayMaxEvents: 3,
        events: regularData,
        // eventOrder: function(a, b) {
        //   return b.title.localeCompare(a.title);
        // },
        eventOrder: 'start',
        eventClick: function(info){
          clearTimeout(_timerTip);
          _showTip = false;
          
          $('.calendar-tooltip').css({
            left: info.jsEvent.pageX,
            top: info.jsEvent.pageY + 10,
            display: 'block',
          });
          
          _timerTip = setTimeout(() => {
            _showTip = true;
          }, 250);
        },
        
        datesSet: function() {
          setTimeout(function(){
            drawTotalUI();
          }, 10)
        },

        eventContent: function(arg) {
          var event = arg.event;
          var arr = event.title.split('|');

          return {
            html: `<div class="fc-event-title"><span class="fc-l">${arr[0]}</span><span class="fc-r">${arr[1]}</span></div>`
          }
        }
      });

      fullCalendar.render();
    });
    $('.tab-btn li a').on('click', function(){
      if ($(this).text() === '주간') {
        fullCalendar.changeView('timeGridWeek');
        fullCalendar.setOption('dayMaxEvents', 999);
        $('#calendar.fc').addClass('weekGrid'); // timeGrid
        $('#calendar.fc').removeClass('monthGrid');
      } else {
        fullCalendar.changeView('dayGridMonth');
        fullCalendar.setOption('dayMaxEvents', 2);
        $('#calendar.fc').removeClass('weekGrid'); // timeGrid
        $('#calendar.fc').addClass('monthGrid');
      }
    });
    
    $(document).on('click', function(e){
      if (_showTip && !$(e.target).closest('.calendar-tooltip').length) {
        clearTimeout(_timerTip);
        _showTip = false;
        $('.calendar-tooltip').hide();
      }
    });

    var qsample = $.urlParam('sample');
    if (qsample) {
      setTimeout(() => {
        if (qsample == "timeGridWeek") {
          $('.calendar-item .tab-btn li:eq(1) a').click();
        }
      }, 250);
    }
  </script>
</body>
</html>